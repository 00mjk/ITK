INCLUDE_DIRECTORIES(${ITK_SOURCE_DIR}/Utilities/zlib)
INCLUDE_DIRECTORIES(${ITK_SOURCE_DIR}/Utilities/png)

SOURCE_FILES(ITKIO_SRCS
itkWriter
itkImageIOBase
itkImageIOFactory
itkMetaImageIOFactory
itkMetaImageIO
itkPNGImageIOFactory
itkPNGImageIO
itkVOLImageIOFactory
itkVOLImageIO
itkVTKImageIOFactory
itkVTKImageIO
)

IF(WIN32)
  IF(BUILD_SHARED_LIBS)
    ADD_DEFINITIONS(-DPNG_BUILD_DLL -DZLIB_DLL -DPNG_NO_MODULEDEF)
  ELSE(BUILD_SHARED_LIBS)
    SET(PNG_STATIC 1)
    ADD_DEFINITIONS(-DPNG_STATIC)
  ENDIF(BUILD_SHARED_LIBS)
ENDIF(WIN32)

# Add ITKIO library
ADD_LIBRARY(ITKIO ITKIO_SRCS)
TARGET_LINK_LIBRARIES(ITKIO ITKCommon itkpng itkzlib)

LINK_DIRECTORIES(${ITK_BINARY_DIR}/Utilities/png)
LINK_DIRECTORIES(${ITK_BINARY_DIR}/Utilities/zlib)
LINK_DIRECTORIES(${ITK_BINARY_DIR}/Code/IO)

